# まとめ

- 多重のifは極力避ける
    
  メソッドの最初に例外を全て弾き早期returnさせる
  そのメソッドが本来やりたいことをインデント浅い位置に書いて明確にする

  昔は「returnがあちこちにあるとメソッドがどこで終わるか分からないからダメ」とも言われていた
  でもそれは見落とすぐらいreturnがあちこちにある複雑なメソッドだったことが問題だった気もする

- Switch文の仕様

  書籍ではswitch文の追加漏れによるノウハウを書いているがSwiftやDartでは言語仕様で防いでいる
  このように言語仕様に応じて最適な書き方も違ってくる
  別言語をメインにしている人がプロジェクトに入れば書籍の書き方をしている場合もあるのでメリットデメリットを把握しておこう

- 分岐が複雑になるようならprotocolやabstractを使ってみる

  それはそれで複雑な気もするがswitchがなくても書けるよという手段があることは知っておこう
  switchのcaseが1000や2000になるとさすがにprotocolやabstractの手段の方が良さそう

  2023年現在、長い歴史のスマホアプリでもせいぜい10年ぐらいしか運用されていない
  これが昭和や平成初期からあるシステムだと長い運用で条件が1000個とかもあり、if elseが1000個も普通にある
  スマホアプリも今後そうなってくるわけなので、同じ過ちを犯さないためこういう設計を知っておこう

  だけど最初からこんなprotocolを駆使したパターンでやるとややこしい
  適材適所で「そろそろifやswitchのcaseが増えたからprotocolのパターンに切り替えを検討するか」という方針がいいかも

- protocolやabstractを使う本質を理解しよう

  「条件分岐をなくすため」に取り入れるという本質を忘れないようにしよう
  それで型判定のためにif文を使ったら意味がない

- フラグの引数を用意しない

  メソッドの入り口でフラグ判定して処理を分岐させるぐらいなら似たような処理でもメソッドを分けよう
  